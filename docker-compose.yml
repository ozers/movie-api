   version: '3.8'

   services:
     app:
       build: .
       ports:
         - "3000:3000"
       depends_on:
         - mongo
         - redis
       environment:
         NODE_ENV: development
         MONGO_HOST: mongo
         MONGO_PORT: 27017
         MONGO_DATABASE: movie-db
         REDIS_URL: redis://redis:6379

     mongo:
       image: mongo:latest
       ports:
         - "27017:27017"
       volumes:
         - movie-db-data:/data/db

     redis:
       image: redis:alpine
       container_name: movie-api-redis
       ports:
         - "6379:6379"
       volumes:
         - redis-data:/data
       restart: unless-stopped
       command: redis-server --save 60 1 --loglevel warning

   volumes:
     movie-db-data:
     redis-data: